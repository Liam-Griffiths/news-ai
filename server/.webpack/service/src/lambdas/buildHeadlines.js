module.exports=function(e){var t={};function r(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(o,s,function(t){return e[t]}.bind(null,s));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t){e.exports=require("aws-sdk")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.responses=void 0,t.responses={unauthorized:{statusCode:401,body:JSON.stringify({error:"Unauthorized"}),headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0}},badRequest:{statusCode:400,body:JSON.stringify({error:"Bad Request"}),headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0}},notFound:{statusCode:404,body:JSON.stringify({error:"Not found"}),headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0}},serverError:{statusCode:500,body:JSON.stringify({error:"Internal Server Error"}),headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0}},ok:{statusCode:200,body:JSON.stringify({status:"OK"}),headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0}}}},,function(e,t,r){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.handler=void 0;const s=r(1),n=o(r(4)),l=r(5),i=r(6),a=o(r(7)),u=o(r(0));t.handler=async e=>{let t=new n.default,r=[];for(let e of i.sources.mainstream)try{(await t.parseURL(e.url)).items.forEach(e=>{const t={headline:e.title,url:e.link,topics:[]};let o=a.default(e.title).topics().json(),s=[];o.forEach(e=>{o.length>1&&s.push(e.text)}),s.length&&(t.topics.push(s[0]+s[1]),r.push(t))})}catch(t){console.log(e.title+" broken")}r=function(e){for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}(r);let o=[];r.forEach(e=>{e.topics.forEach(t=>{let r=function(e,t){for(let r=0;r<t.length;r++)if(t[r].topic===e)return r;return-1}(t,o);-1!==r?o[r].headlines.push(e.headline):o.push({topic:t,headlines:[e.headline],url:e.url})})}),o.sort(function(e){let t=1;"-"===e[0]&&(t=-1,e=e.substr(1));return function(r,o){return(r[e].length<o[e].length?-1:r[e].length>o[e].length?1:0)*t}}("headlines")),o=o.filter((function(e){return 1!==e.headlines.length})),o.reverse();const c=new l.TextGenerator(o[0].headlines),p={lead:{text:await c.generateSentence(),link:o[0].url},headlines:[]};let d=0;for(let e of o){if(d>0&&d<20){const t=new l.TextGenerator(e.headlines),r=await t.generateSentence();p.headlines||(p.headlines=[]),r&&p.headlines.push({text:r,link:e.url})}d+=1}const h=new u.default.S3,w={Bucket:"headlines-bucket",Key:"headlines.json",Body:JSON.stringify(p),ContentType:"application/json"};await h.putObject(w).promise();const f={Bucket:"headlines-bucket",Key:"raw.json",Body:JSON.stringify(o),ContentType:"application/json"};await h.putObject(f).promise();const m=s.responses.ok;return m.body=JSON.stringify(p),m}},function(e,t){e.exports=require("rss-parser")},function(e,t){e.exports=require("node-markov-generator")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sources=t.prodConfig=t.devConfig=void 0,t.devConfig={peopleTable:"teamx-dev-people",teamTable:"teamx-dev-team"},t.prodConfig={peopleTable:"teamx-prod-people",teamTable:"teamx-prod-team"},t.sources={mainstream:[{title:"Guardian",url:"https://theguardian.com/uk/rss"},{title:"Daily Mail",url:"https://dailymail.co.uk/home/index.rss"},{title:"Telegraph",url:"https://telegraph.co.uk/rss"},{title:"Mirror",url:"https://mirror.co.uk/rss.xml"},{title:"Metro",url:"https://metro.co.uk/feed/"},{title:"Sun",url:"https://thesun.co.uk/feed"},{title:"BBC",url:"http://feeds.bbci.co.uk/news/world/rss.xml"},{title:"CNN",url:"http://rss.cnn.com/rss/cnn_latest.rs"},{title:"Fox News",url:"http://feeds.foxnews.com/foxnews/latest"},{title:"NY Times",url:"https://www.nytimes.com/svc/collections/v1/publish/https://www.nytimes.com/section/world/rss.xml"},{title:"Breaking911",url:"https://rss.app/feeds/oVU7bONq0Z6ZWv5I.xml"},{title:"Al Jazeera",url:"http://www.aljazeera.com/xml/rss/all.xml"},{title:"Yahoo News",url:"http://yahoo.com/news/rss/world"},{title:"Reddit News",url:"https://www.reddit.com/r/worldnews/.rss"},{title:"Washington Post",url:"http://feeds.washingtonpost.com/rss/world"},{title:"CNBC",url:"https://www.cnbc.com/id/100727362/device/rss/rss.html"},{title:"RT",url:"https://www.rt.com/rss/news/"},{title:"NPR",url:"http://www.npr.org/rss/rss.php?id=1004"},{title:"ABC News",url:"http://abcnews.go.com/abcnews/internationalheadlines"},{title:"CBS News",url:"https://www.cbsnews.com/latest/rss/world"},{title:"Independent",url:"http://www.independent.co.uk/news/world/rss"},{title:"LA Times",url:"https://www.latimes.com/world/rss2.0.xml"},{title:"Coin Telegraph",url:"https://cointelegraph.com/feed"},{title:"Bitcoin",url:"https://news.bitcoin.com/feed/"},{title:"MarketWatch",url:"http://feeds.marketwatch.com/marketwatch/topstories/"},{title:"Investing",url:"https://www.investing.com/rss/news.rss"},{title:"Motley Fool",url:"https://www.fool.co.uk/feed/"},{title:"FT",url:"https://www.ft.com/?format=rss"},{title:"CryptoNews",url:"https://cryptonews.com/news/feed"},{title:"4chan /biz/",url:"https://boards.4channel.org/biz/index.rss"}],breaking:[{title:"Breaking911",url:"https://rss.app/feeds/oVU7bONq0Z6ZWv5I.xml"}]}},function(e,t){e.exports=require("compromise")}]);